/**
 * Placeholdem - Placeholder Caret Animation
 * v0.0.3 - MIT License
 * http://placeholdem.jackrugile.com - https://github.com/jackrugile/placeholdem
 * by Jack Rugile - @jackrugile
 */

function Placeholdem(e){"use strict";!function(){for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[n[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[i]+"CancelAnimationFrame"]||window[n[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var i=(new Date).getTime(),l=Math.max(0,16-(i-e)),t=window.setTimeout(function(){n(i+l)},l);return e=i+l,t}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var n=this;n.init=function(){if(n.elems=[],n.elemsLength=e.length,n.i=0,n.elemsLength)for(;n.i<n.elemsLength;n.i++)n.elems.push(new n.PlaceholdemElem(e[n.i]));else n.elems.push(new n.PlaceholdemElem(e))},n.destroy=function(){if(n.elemsLength=n.elems.length,n.i=0,n.elemsLength){for(;n.i<n.elemsLength;n.i++)n.elems[n.i].destroy();n.elems.length=0}},n.PlaceholdemElem=function(e){var n=this;n.init=function(){n.elem=e,n.placeholder=n.elem.getAttribute("placeholder"),n.elem.removeAttribute("placeholder"),n.rAF=null,n.animating=0,n.elem.value||(n.elem.value=n.placeholder),n.on(n.elem,"focus",n.onFocus),n.on(n.elem,"blur",n.onBlur),n.on(n.elem,"keydown",n.onKeydown)},n.on=function(e,n,i){e.addEventListener?e.addEventListener(n,i):e.attachEvent("on"+n,i)},n.off=function(e,n,i){e.removeEventListener?e.removeEventListener(n,i):e.detachEvent("on"+n,i)},n.onFocus=function(){(n.elem.value===n.placeholder||n.animating)&&(n.animating=1,window.cancelAnimationFrame(n.rAF),n.deletePlaceholder())},n.onBlur=function(){(""===n.elem.value||n.animating)&&(n.animating=1,window.cancelAnimationFrame(n.rAF),n.restorePlaceholder())},n.onKeydown=function(){n.animating&&(n.animating=0,window.cancelAnimationFrame(n.rAF),n.elem.value="")},n.deletePlaceholder=function(){n.elem.value.length>0?(n.elem.value=n.elem.value.slice(0,-1),n.rAF=window.requestAnimationFrame(n.deletePlaceholder)):n.animating=0},n.restorePlaceholder=function(){n.elem.value.length<n.placeholder.length?(n.elem.value+=n.placeholder[n.elem.value.length],n.rAF=window.requestAnimationFrame(n.restorePlaceholder)):n.animating=0},n.destroy=function(){n.elem.setAttribute("placeholder",n.placeholder),n.off(n.elem,"focus",n.onFocus),n.off(n.elem,"blur",n.onBlur)},n.init()},n.init()}